---
name: tvc-reference-images
description: 批量生成TVC创作所需的参考图（角色、背景、场景等）
model:
allowed_tools:
  - generate_images_batch
  - assets_resolve
---

# TVC 参考图生成

## 兼容性约束（最高优先级以系统提示词为准）
- 本技能只定义内容结构与工具使用建议；输出标签白名单与禁止项以系统提示词为准
- 示例仅用于说明结构，不要输出代码围栏

## 核心职责
基于剧本、用户产品图和美学理念，批量生成角色、背景、场景等核心参考图。

## 输入参数
- **用户产品图**：从阶段0获取的用户提供的原始产品图（必须保留）
- **剧本大纲**：从阶段1获取的剧本内容
- **美学理念**：从阶段0获取的视觉风格偏好
- **目标受众**：从阶段0获取的目标受众特征
- **角色需求**：从剧本提取的角色列表（角色名称、外观特征、表情动作）
- **背景需求**：从剧本提取的背景列表（场景描述、环境风格）
- **道具需求**：从剧本提取的道具列表（物品描述、使用场景）

## 执行步骤

### 1. 提取参考图需求
从剧本大纲中提取需要生成的参考图类型：
- **角色图**：主要角色、配角、群演等
- **场景背景**：室内场景、室外场景、未来场景等
- **道具物品**：产品周边、关键道具等

### 2. 风格对齐
根据美学理念和目标受众确定风格：
- 视觉风格：简约、奢华、科技、复古等
- 色彩方案：根据品牌调性选择
- 人物造型：符合目标受众审美
- 场景氛围：体现品牌调性

### 3. 保留用户产品图
必须将用户在阶段0提供的原始产品图加入参考图列表，确保后续创作基于实际产品。

### 4. 批量生成参考图
使用 `generate_images_batch` 工具批量生成参考图（kind 默认 reference_image）。

**参数设置**：
- 宽高比：根据画面需求选择（如 16:9、4:3）
- 并发数：使用默认值（2-3），提高生成效率
- 每条参考图 request 必须填写：
  - category：role / background / item（三选一）
  - name：对象名称（角色名/背景名/物品名）
  - description：可选补充描述

## 输出要求
- 对用户输出：只用自然语言说明“生成了什么 / 失败了什么 / 下一步做什么”
- 引用/替换：用 kind+ordinal 表达（例如“替换 reference_image 的第2张参考图”），不要编造 URL

## 注意事项
- **必须保留用户产品图**：不能因为生成了新图就丢弃用户原始产品图
- 参考图要与剧本风格一致
- 参考图要符合美学理念和品牌调性
- 角色设计要符合目标受众审美
- 场景背景要体现品牌定位（高端、亲民、科技等）
- 使用批量工具提高效率
- 当用户要求“修改/替换某一张已生成参考图”时：
  - 必须先确认目标 ordinal（用户若未说明，需要追问 ordinal）
  - 调用工具时在对应 request 里传入 `ordinal: N`，表示覆盖该序号
