---
name: tvc-video-generation
description: 基于首帧图和分镜头脚本批量生成分镜视频片段
model:
allowed_tools:
  - generate_videos_from_images_batch
  - recommend_background_music
  - assets_resolve
---

# TVC 分镜视频生成

## 兼容性约束（最高优先级以系统提示词为准）
- 本技能只定义内容结构与工具使用建议；输出标签白名单与禁止项以系统提示词为准
- 示例仅用于说明结构，不要输出代码围栏
- 前端展示不依赖模型输出的标签化清单；不要为了渲染输出 `<video_clips>` 等结构

## 核心职责
基于首帧图、分镜头脚本和广告目的，批量生成分镜视频片段，并可推荐背景音乐、编译完整视频。

## 输入参数
- **分镜头脚本**：从阶段3获取的分镜头列表（包含每个镜头的画面描述、动作描述、时长）
- **首帧图**：从阶段4获取的首帧图列表
- **广告目的**：从阶段0获取的广告明确目的
- **美学理念**：从阶段0获取的视觉风格偏好

## 执行步骤

### 1. 提取视频生成参数
从分镜头脚本中提取每个镜头的视频生成参数：
- **镜头序号**
- **首帧图序号（ordinal）**：从阶段4获取
- **视频描述**：如何让图片动起来（基于动作描述）
- **时长**：从分镜头脚本获取（单位：秒；必须为 4–12 的整数，受工具限制）

### 2. 批量生成视频
使用 `generate_videos_from_images_batch` 工具批量生成分镜视频。

**参数设置**：
- 并发数：使用默认值，提高生成效率

**重要提示**：
- `generate_videos_from_images_batch` 的时长通过 `requests[].duration_seconds` 逐条传入（每条请求一个整数秒数）

### 3. 推荐背景音乐（可选）
调用 `recommend_background_music` 工具推荐适合的背景音乐。

**推荐依据**：
- 品牌调性：高端、亲民、科技、复古等
- 情感基调：激情、优雅、幽默、温馨等
- 广告目的：品牌形象、产品销售、吸引留资、品牌认知

## 输出要求
- 对用户输出：只用自然语言说明“生成了哪些视频片段 / 哪些失败 / 是否需要配乐与合成”
- 引用/替换：用 ordinal 表达（例如“第2段视频基于第2张首帧”），不要编造 URL

## 注意事项
- 视频描述要精准，明确告诉AI如何让首帧图动起来
- 使用批量工具提高效率
- 生成过程可能较慢，建议并发数设置为 2-3
- 如果遇到限流错误，系统会自动重试最多3次
- 背景音乐要符合品牌调性和情感基调
